#!/usr/bin/env ruby

# Standalone test server for query_console gem

require 'bundler/setup'

# Set up Rails environment first
ENV['RAILS_ENV'] ||= 'development'

# Load dummy app
require_relative '../spec/dummy/config/environment'

# Load seeds
puts "ğŸ”§ Setting up test database..."
load File.expand_path('../spec/dummy/db/seeds.rb', __dir__)

puts ""
puts "ğŸš€ Starting QueryConsole test server with Puma..."
puts "ğŸ“ Visit: http://localhost:9292/query_console"
puts ""
puts "Press Ctrl+C to stop"
puts ""

# Simple Puma server
require 'puma'

app = Rails.application

server = Puma::Server.new(app)
server.add_tcp_listener '0.0.0.0', 9292
server.run.join
